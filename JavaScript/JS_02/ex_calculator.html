<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Calculator</title>
</head>
<body>
  <h1>My Calculator</h1>
  <label>입력한 숫자의 제곱값을 구해봅시다:
    <input type="number" id="square-input" size="2">
  </label>
  <button id="square-button">Calculate</button><br><br>
  <label>입력한 지수만큼 거듭제곱값을 구해봅시다: </label>
  <div id="power-input" style="display: inline">
    <button id="power-number">지수</button>
    <button id="power-button">Calculate</button>
  </div>
  <br><br>

  <p>정상가의 할인가격을 알아봅시다.</p>
  <label>
    정상가:
    <input type="number" id="origin" size="2">원 / 
  </label>
  <label>
    할인율:
    <input type="number" id="discount" size="2">%
  </label>
  <button id="sale-button">Calculate</button>
  <br><br>

  <p>할인가의 원래정가를 알아봅시다.</p>
  <label>
    할인가:
    <input type="number" id="sale" size="2">원 / 
  </label>
  <label>
    할인율:
    <input type="number" id="reverse" size="2">%
  </label>
  <button id="unsale-button">Calculate</button>
  <br><br>

  <h3>계산결과</h3>
  <div id="solution"></div>
</body>
<script>
  const square = document.querySelector('#square-input')
  const sq_Btn = document.querySelector('#square-button')
  const power = document.querySelector('#power-number')
  const pw_Ipt = document.querySelector('#power-input')
  const pw_Btn = document.querySelector('#power-button')

  sq_Btn.addEventListener('click', function(){
    const sq_num = square.value**2
    console.log(square.value + '을(를) 제곱한 결과는 ' + sq_num + ' 입니다.')
    document.querySelector('#solution').innerHTML = sq_num
  })
  power.addEventListener('click', function(){
    pw_num()
  })
  power.addEventListener('mouseover', function(){
    this.style.background = 'orange'
    this.style.fontWeight = 'bold'
  })
  power.addEventListener('mouseout', function(){
    this.style.background = ''
    this.style.fontWeight = ''
  })
  const pw_num = function(){
    const power_num = document.createElement('input')
    power_num.type = 'number'
    power_num.size = '2'
    pw_Ipt.prepend(power_num)
    power.remove()

    pw_Btn.addEventListener('click', function(){
    const pw_cal = square.value ** power_num.value
    console.log(square.value + '을(를) ' + power_num.value + '만큼 거듭제곱한 결과는 ' + pw_cal + '입니다.')
    document.querySelector('#solution').innerHTML = pw_cal
  })
  }
  
  const originPrice = document.querySelector('#origin')
  const discRate = document.querySelector('#discount')
  const saleBtn = document.querySelector('#sale-button')

  saleBtn.addEventListener('click', function(){
    if (discRate.value >= 100 ){
      alert('100미만의 숫자를 입력해주세요.')
    } else {
    const salePrice = originPrice.value * (100-discRate.value) / 100
    console.log('정상가 ' + originPrice.value + '원 인 상품의 ' + discRate.value + '% 할인가는 ' + salePrice + '원 입니다.')
    document.querySelector('#solution').innerHTML = salePrice + '원'
    }
  })

  const salePrice = document.querySelector('#sale')
  const reverseRate = document.querySelector('#reverse')
  const unsaleBtn = document.querySelector('#unsale-button')

  unsaleBtn.addEventListener('click', function(){
    if (discRate.value >= 100 ){
      alert('100미만의 숫자를 입력해주세요.')
    } else {
    const unsalePrice = salePrice.value / (100 - reverseRate.value) * 100
    console.log('할인가 ' + salePrice.value + '원 인 상품의 ' + reverseRate.value + '% 할인전 정상가는 ' + unsalePrice + '원 입니다.')
    document.querySelector('#solution').innerHTML = unsalePrice + '원'
    }
  })
  const allBtn = document.querySelectorAll('button')
  for (i = 0; i < allBtn.length; i++) {
    allBtn[i].style.border = "2px solid black";
    allBtn[i].style.borderRadius = '5px'
  }
</script>
</html>